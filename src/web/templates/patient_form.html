{% extends 'base.html' %}

{% block content %}
<div class="max-w-4xl mx-auto bg-gray-800 p-8 rounded-xl shadow-lg">
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-3xl font-semibold text-gray-100">{{ action }} Patient</h1>
        <p class="text-sm text-gray-400">Enter patient details. Fields marked * are required.</p>
    </div>

    <form method="POST" class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="space-y-1">
                <label for="patient_id" class="block text-sm font-medium text-gray-300">Patient ID <span class="text-red-400">*</span></label>
                <input type="text" id="patient_id" name="patient_id" value="{{ patient.patient_id or '' }}" {% if action == 'Edit' %}readonly{% endif %} required class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm">
            </div>
            <div class="space-y-1">
                <label for="name" class="block text-sm font-medium text-gray-300">Full Name <span class="text-red-400">*</span></label>
                <input type="text" id="name" name="name" value="{{ patient.name or '' }}" required class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm">
            </div>

            <div class="space-y-1">
                <label for="age" class="block text-sm font-medium text-gray-300">Age</label>
                <input type="number" id="age" name="age" value="{{ patient.age or '' }}" class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm">
            </div>
            <div class="space-y-1">
                <label for="gender" class="block text-sm font-medium text-gray-300">Gender</label>
                <select id="gender" name="gender" class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm">
                    <option value="Male" {% if patient.gender == 'Male' %}selected{% endif %}>Male</option>
                    <option value="Female" {% if patient.gender == 'Female' %}selected{% endif %}>Female</option>
                    <option value="Other" {% if patient.gender == 'Other' %}selected{% endif %}>Other</option>
                </select>
            </div>

            <div class="space-y-1">
                <label for="diabetes_type" class="block text-sm font-medium text-gray-300">Diabetes Type</label>
                <select id="diabetes_type" name="diabetes_type" class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm">
                    <option value="Type 1" {% if patient.diabetes_type == 'Type 1' %}selected{% endif %}>Type 1</option>
                    <option value="Type 2" {% if patient.diabetes_type == 'Type 2' %}selected{% endif %}>Type 2</option>
                    <option value="Gestational" {% if patient.diabetes_type == 'Gestational' %}selected{% endif %}>Gestational</option>
                </select>
            </div>

            <div class="space-y-1">
                <label for="duration_years" class="block text-sm font-medium text-gray-300">Duration (Years)</label>
                <input type="number" step="0.1" id="duration_years" name="duration_years" value="{{ patient.duration_years or '' }}" class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm">
            </div>

            <div class="space-y-1">
                <label for="height_cm" class="block text-sm font-medium text-gray-300">Height (cm)</label>
                <input type="number" step="0.1" id="height_cm" name="height_cm" value="{{ patient.height_cm or '' }}" class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm">
            </div>

            <div class="space-y-1">
                <label for="weight_kg" class="block text-sm font-medium text-gray-300">Weight (kg)</label>
                <input type="number" step="0.1" id="weight_kg" name="weight_kg" value="{{ patient.weight_kg or '' }}" class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm">
            </div>

            <div class="space-y-1">
                <label for="latest_hba1c" class="block text-sm font-medium text-gray-300">Latest HbA1c (%)</label>
                <input type="number" step="0.1" id="latest_hba1c" name="latest_hba1c" value="{{ patient.latest_hba1c or '' }}" class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm">
                <p class="text-xs text-gray-500 mt-1">Example: 7.2</p>
            </div>

            <div class="space-y-1">
                <label for="egfr_ml_min" class="block text-sm font-medium text-gray-300">eGFR (ml/min)</label>
                <input type="number" step="0.1" id="egfr_ml_min" name="egfr_ml_min" value="{{ patient.egfr_ml_min or '' }}" class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm">
            </div>
        </div>

        <div class="grid grid-cols-1 gap-4">
            <div>
                <label for="comorbidities" class="block text-sm font-medium text-gray-300">Comorbidities</label>
                <textarea id="comorbidities" name="comorbidities" rows="3" class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm">{{ patient.comorbidities or '' }}</textarea>
            </div>
            <div>
                <label for="current_meds" class="block text-sm font-medium text-gray-300">Current Medications</label>
                <textarea id="current_meds" name="current_meds" rows="3" class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm">{{ patient.current_meds or '' }}</textarea>
            </div>
            <div>
                <label for="recent_symptoms" class="block text-sm font-medium text-gray-300">Recent Symptoms</label>
                <textarea id="recent_symptoms" name="recent_symptoms" rows="3" class="mt-1 block w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm">{{ patient.recent_symptoms or '' }}</textarea>
            </div>
        </div>

        <div class="mt-2 flex justify-end gap-3">
            <a href="/" class="inline-flex items-center px-4 py-2 border border-gray-600 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-700/40">Cancel</a>
            <button type="submit" class="inline-flex items-center px-4 py-2 bg-primary hover:bg-primary-dark rounded-md text-sm font-semibold text-white">{{ action }} Patient</button>
        </div>
    </form>
</div>
{% endblock %}
